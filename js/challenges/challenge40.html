<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Challenge 39</title>
</head>

<body>

	<form id="addpet">
		<label>Name <input type="text" name="name" id="name"></label><br>
		<label>Species <input type="text" name="species" id="species"></label><br>
		<label>Greeting <input type="text" name="greeting" id="greeting"></label><br>
		<input type="submit" value="add pet">
	</form>
	<div></div>

	<script>
		// const pet = {
		// 	name: "Tom",
		// 	species: "cat",
		// }

		// pet.qualities = {
		// 		color: "red",
		// 		disposition: "angry",
		// 		size: "fat",
		// }

		// pet.supplies = ["food", "toys", "cleaning tools", "collar"];

		// pet.greeting = function() {
		// 	console.log("meow");
		// }
		// pet.greeting();

		function Pet(name, species, greetingMessage) {
			this.name = name;
			this.species = species;
			this.greeting = function () {
				console.log(greetingMessage);
			}
		}

		// const cat = new Pet("Tom", "cat", "meowwwww");
		// const dog = new Pet("Rocky", "dog", "woof");

		// cat.greeting();
		// dog.greeting();
		const myform = document.getElementById("addpet");
		myform.addEventListener("submit", function (event) {
			event.preventDefault();
			const elements = document.querySelectorAll("input");
			let empty = 0;

			elements.forEach(function (field) {
				if (!field.value) {
					empty++;
				}
			})

			if (empty == 0) {
				const newPet = new Pet(elements[0].value, elements[1].value, elements[2].value);
				fillDiv(newPet);
			} else {
				alert("Please, fill all the fields...");
			}
		});

		let petDiv = document.querySelector('div');
		
		function fillDiv(pet) {
			let newPet = `<p>I have a pet ${pet.species} named ${pet.name}</p>`;
			newPet += `<p><button id="greeting"> Click for a greeting from ${pet.name} </button></p>`;
			petDiv.innerHTML = newPet;
			document.getElementById('greeting').addEventListener("click", pet.greeting);
		}


	</script>

</body>

</html>